angular.module("objective-fire").factory("FactoryExtender",["$FirebaseObject","$firebase","$q","ObjectArray",function(a,b,c){return{createFactory:function(b){var d={},e=b.properties,f=e.primitive,g=(e.objectP,e.arrayP,b.objectMethods);for(param in g)d[param]=g[param];return d.$load=function(a){var b=c.defer();return this._doLoad[a]?b.resolve(this[a]):(this._doLoad[a]=!0,this._loaded||this.$loaded().then(function(b){!b[a]})),b.promise},d.$$updated=function(a){for(var b=!1,c=a.val(),d=0;d<f.length;d++){var e=f[d].name;c[e]==this[e]&&(b=!0),this[e]=c[e]}return b},a.$extendFactory(d)}}}]),angular.module("objective-fire").factory("FireObject",["$firebase","FactoryExtender",function(a,b){function c(a,c,d){this.objectClass=a,this.rootRef=c,this.objFire=d,this.factory=b.createFactory(this.objectClass,this.rootRef,this.objFire)}return c.prototype["new"]=function(){var b=this.rootRef.child(this.objectClass.name).push(),c=a(b,{objectFactory:this.factory}),d=c.$asObject();return d._loaded=!1,d.$loaded().then(function(){d._loaded=!0}),d._doLoad={},d.pointers={},null!=this.objectClass.objectConstructor&&this.objectClass.objectConstructor.apply(d,arguments),d.$save(),d},c.prototype.instance=function(b){var c=this.rootRef.child(this.objectClass.name).child(b),d=a(c,{objectFactory:this.factory}),e=d.$asObject();return e._loaded=!1,e.$loaded().then(function(){e._loaded=!0}),e._doLoad={},e.pointers={},e},c}]),angular.module("objective-fire").factory("ObjectArray",function(a,b){var c=function(b){return a.$extendFactory({$$added:function(a){return b.instance(a.key())},$$updated:function(a){return this.$getRecord(a.key())=b.instance(a.key()),!0}})};return function(a,d){var e=b(a,{arrayFactory:c(d)}),f=e.$asArray();return f}}),angular.module("objective-fire").factory("ObjectClass",function(){function a(b,c,d,e){return!this instanceof a?new a(b,c,d,e):(this.name=b,this.objectConstructor=c,this.objectMethods=d,void(this.properties=e))}return a}),angular.module("objective-fire",["firebase"]).factory("ObjectiveFire",["FireObject",function(a){function b(a){return!this instanceof b?new b(a):(this.ref=a,void(this.objects={}))}return b.prototype={registerObjectClass:function(b){return this.objects[b.name]=new a(b,this.ref,this),this},getObjectClass:function(a){return this.objects[a]}},b}]),angular.module("objective-fire").factory("ObjectProperty",function(){function a(b,c){return!this instanceof a?new a(b,c):(this.name=b,void(this.objectClassName=c))}return a}).factory("ObjectArrayProperty",function(){function a(b,c){return!this instanceof ObjectProperty?new a(b,c):(this.name=b,void(this.objectClassName=c))}return a}).factory("PrimitiveProperty",function(){function a(b){return!this instanceof a?new a(b):void(this.name=b)}return a}).factory("Properties",["PrimitiveProperty","ObjectProperty","ObjectArrayProperty",function(a,b,c){function d(){return!this instanceof d?new d:(this.primitive=[],this.objectP=[],void(this.arrayP=[]))}return d.prototype={addProperty:function(d){return d instanceof a?this.primitive.push(d):d instanceof b?this.objectP.push(d):d instanceof c&&this.arrayP.push(d),this}},d}]);